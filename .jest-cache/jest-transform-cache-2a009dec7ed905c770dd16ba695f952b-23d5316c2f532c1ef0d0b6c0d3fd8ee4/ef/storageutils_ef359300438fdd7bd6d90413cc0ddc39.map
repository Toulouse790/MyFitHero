{"version":3,"names":["cov_uh9b41ud3","actualCoverage","s","Storage","set","key","value","expiryInMinutes","f","item","timestamp","Date","now","expiry","b","undefined","localStorage","setItem","prefix","JSON","stringify","error","console","get","storedData","getItem","parse","remove","removeItem","clear","keys","Object","filter","startsWith","forEach","has","exports","defineProperty"],"sources":["/workspaces/MyFitHero/src/core/utils/storage.utils.ts"],"sourcesContent":["// Types pour le localStorage\nexport interface StorageItem<T> {\n  value: T;\n  timestamp: number;\n  expiry: number | undefined; // En millisecondes, peut être undefined\n}\n\n// Classe pour gérer le localStorage avec expiration et typage\nexport class Storage {\n  private static prefix = 'myfithero_';\n\n  // Sauvegarder une donnée\n  static set<T>(key: string, value: T, expiryInMinutes?: number): void {\n    try {\n      const item: StorageItem<T> = {\n        value,\n        timestamp: Date.now(),\n        expiry: expiryInMinutes ? expiryInMinutes * 60 * 1000 : undefined,\n      };\n      \n      localStorage.setItem(\n        `${this.prefix}${key}`,\n        JSON.stringify(item)\n      );\n    } catch (error: any) {\n      console.error(`Erreur lors de la sauvegarde de ${key}:`, error);\n    }\n  }\n\n  // Récupérer une donnée\n  static get<T>(key: string): T | undefined {\n    try {\n      const storedData = localStorage.getItem(`${this.prefix}${key}`);\n      if (!storedData) return null;\n\n      const item: StorageItem<T> = JSON.parse(storedData);\n      \n      // Vérifier l'expiration\n      if (item.expiry && Date.now() - item.timestamp > item.expiry) {\n        this.remove(key);\n        return null;\n      }\n\n      return item.value;\n    } catch (error: any) {\n      console.error(`Erreur lors de la récupération de ${key}:`, error);\n      return null;\n    }\n  }\n\n  // Supprimer une donnée\n  static remove(key: string): void {\n    try {\n      localStorage.removeItem(`${this.prefix}${key}`);\n    } catch (error: any) {\n      console.error(`Erreur lors de la suppression de ${key}:`, error);\n    }\n  }\n\n  // Vider tout le storage de l'app\n  static clear(): void {\n    try {\n      const keys = Object.keys(localStorage).filter(key => \n        key.startsWith(this.prefix)\n      );\n      keys.forEach(key => localStorage.removeItem(key));\n    } catch (error: any) {\n      console.error('Erreur lors du vidage du storage:', error);\n    }\n  }\n\n  // Vérifier si une clé existe\n  static has(key: string): boolean {\n    return localStorage.getItem(`${this.prefix}${key}`) !== null;\n  }\n}\n"],"mappings":"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","ignoreList":[]}