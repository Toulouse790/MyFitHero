debac88a87e77de45765300412b32e1d
"use strict";

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all) __defProp(target, name, {
    get: all[name],
    enumerable: true
  });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from)) if (!__hasOwnProp.call(to, key) && key !== except) __defProp(to, key, {
      get: () => from[key],
      enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable
    });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
// If the importer is in node compatibility mode or this is not an ESM
// file that has been converted to a CommonJS file using a Babel-
// compatible transform (i.e. "__esModule" has not been set), then set
// "default" to the CommonJS "module.exports" for node compatibility.
isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", {
  value: mod,
  enumerable: true
}) : target, mod));
var __toCommonJS = mod => __copyProps(__defProp({}, "__esModule", {
  value: true
}), mod);

// src/index.ts
var index_exports = {};
__export(index_exports, {
  Root: () => Slot,
  Slot: () => Slot,
  Slottable: () => Slottable,
  createSlot: () => createSlot,
  createSlottable: () => createSlottable
});
module.exports = __toCommonJS(index_exports);

// src/slot.tsx
var React = __toESM(require("react"));
var import_react_compose_refs = require("@radix-ui/react-compose-refs");
var import_jsx_runtime = require("react/jsx-runtime");
// @__NO_SIDE_EFFECTS__
function createSlot(ownerName) {
  const SlotClone = /* @__PURE__ */createSlotClone(ownerName);
  const Slot2 = React.forwardRef((props, forwardedRef) => {
    const {
      children,
      ...slotProps
    } = props;
    const childrenArray = React.Children.toArray(children);
    const slottable = childrenArray.find(isSlottable);
    if (slottable) {
      const newElement = slottable.props.children;
      const newChildren = childrenArray.map(child => {
        if (child === slottable) {
          if (React.Children.count(newElement) > 1) return React.Children.only(null);
          return React.isValidElement(newElement) ? newElement.props.children : null;
        } else {
          return child;
        }
      });
      return /* @__PURE__ */(0, import_jsx_runtime.jsx)(SlotClone, {
        ...slotProps,
        ref: forwardedRef,
        children: React.isValidElement(newElement) ? React.cloneElement(newElement, void 0, newChildren) : null
      });
    }
    return /* @__PURE__ */(0, import_jsx_runtime.jsx)(SlotClone, {
      ...slotProps,
      ref: forwardedRef,
      children
    });
  });
  Slot2.displayName = `${ownerName}.Slot`;
  return Slot2;
}
var Slot = /* @__PURE__ */createSlot("Slot");
// @__NO_SIDE_EFFECTS__
function createSlotClone(ownerName) {
  const SlotClone = React.forwardRef((props, forwardedRef) => {
    const {
      children,
      ...slotProps
    } = props;
    if (React.isValidElement(children)) {
      const childrenRef = getElementRef(children);
      const props2 = mergeProps(slotProps, children.props);
      if (children.type !== React.Fragment) {
        props2.ref = forwardedRef ? (0, import_react_compose_refs.composeRefs)(forwardedRef, childrenRef) : childrenRef;
      }
      return React.cloneElement(children, props2);
    }
    return React.Children.count(children) > 1 ? React.Children.only(null) : null;
  });
  SlotClone.displayName = `${ownerName}.SlotClone`;
  return SlotClone;
}
var SLOTTABLE_IDENTIFIER = Symbol("radix.slottable");
// @__NO_SIDE_EFFECTS__
function createSlottable(ownerName) {
  const Slottable2 = ({
    children
  }) => {
    return /* @__PURE__ */(0, import_jsx_runtime.jsx)(import_jsx_runtime.Fragment, {
      children
    });
  };
  Slottable2.displayName = `${ownerName}.Slottable`;
  Slottable2.__radixId = SLOTTABLE_IDENTIFIER;
  return Slottable2;
}
var Slottable = /* @__PURE__ */createSlottable("Slottable");
function isSlottable(child) {
  return React.isValidElement(child) && typeof child.type === "function" && "__radixId" in child.type && child.type.__radixId === SLOTTABLE_IDENTIFIER;
}
function mergeProps(slotProps, childProps) {
  const overrideProps = {
    ...childProps
  };
  for (const propName in childProps) {
    const slotPropValue = slotProps[propName];
    const childPropValue = childProps[propName];
    const isHandler = /^on[A-Z]/.test(propName);
    if (isHandler) {
      if (slotPropValue && childPropValue) {
        overrideProps[propName] = (...args) => {
          const result = childPropValue(...args);
          slotPropValue(...args);
          return result;
        };
      } else if (slotPropValue) {
        overrideProps[propName] = slotPropValue;
      }
    } else if (propName === "style") {
      overrideProps[propName] = {
        ...slotPropValue,
        ...childPropValue
      };
    } else if (propName === "className") {
      overrideProps[propName] = [slotPropValue, childPropValue].filter(Boolean).join(" ");
    }
  }
  return {
    ...slotProps,
    ...overrideProps
  };
}
function getElementRef(element) {
  let getter = Object.getOwnPropertyDescriptor(element.props, "ref")?.get;
  let mayWarn = getter && "isReactWarning" in getter && getter.isReactWarning;
  if (mayWarn) {
    return element.ref;
  }
  getter = Object.getOwnPropertyDescriptor(element, "ref")?.get;
  mayWarn = getter && "isReactWarning" in getter && getter.isReactWarning;
  if (mayWarn) {
    return element.props.ref;
  }
  return element.props.ref || element.ref;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpbmRleF9leHBvcnRzIiwiX19leHBvcnQiLCJSb290IiwiU2xvdCIsIlNsb3R0YWJsZSIsImNyZWF0ZVNsb3QiLCJjcmVhdGVTbG90dGFibGUiLCJtb2R1bGUiLCJleHBvcnRzIiwiX190b0NvbW1vbkpTIiwiUmVhY3QiLCJfX3RvRVNNIiwicmVxdWlyZSIsImltcG9ydF9yZWFjdF9jb21wb3NlX3JlZnMiLCJpbXBvcnRfanN4X3J1bnRpbWUiLCJvd25lck5hbWUiLCJTbG90Q2xvbmUiLCJjcmVhdGVTbG90Q2xvbmUiLCJTbG90MiIsImZvcndhcmRSZWYiLCJwcm9wcyIsImZvcndhcmRlZFJlZiIsImNoaWxkcmVuIiwic2xvdFByb3BzIiwiY2hpbGRyZW5BcnJheSIsIkNoaWxkcmVuIiwidG9BcnJheSIsInNsb3R0YWJsZSIsImZpbmQiLCJpc1Nsb3R0YWJsZSIsIm5ld0VsZW1lbnQiLCJuZXdDaGlsZHJlbiIsIm1hcCIsImNoaWxkIiwiY291bnQiLCJvbmx5IiwiaXNWYWxpZEVsZW1lbnQiLCJqc3giLCJyZWYiLCJjbG9uZUVsZW1lbnQiLCJkaXNwbGF5TmFtZSIsImNoaWxkcmVuUmVmIiwiZ2V0RWxlbWVudFJlZiIsInByb3BzMiIsIm1lcmdlUHJvcHMiLCJ0eXBlIiwiRnJhZ21lbnQiLCJjb21wb3NlUmVmcyIsIlNMT1RUQUJMRV9JREVOVElGSUVSIiwiU3ltYm9sIiwiU2xvdHRhYmxlMiIsIl9fcmFkaXhJZCIsImNoaWxkUHJvcHMiLCJvdmVycmlkZVByb3BzIiwicHJvcE5hbWUiLCJzbG90UHJvcFZhbHVlIiwiY2hpbGRQcm9wVmFsdWUiLCJpc0hhbmRsZXIiLCJ0ZXN0IiwiYXJncyIsInJlc3VsdCIsImZpbHRlciIsIkJvb2xlYW4iLCJqb2luIiwiZWxlbWVudCIsImdldHRlciIsIk9iamVjdCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImdldCIsIm1heVdhcm4iLCJpc1JlYWN0V2FybmluZyJdLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC50cyIsIi4uL3NyYy9zbG90LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQge1xuICBTbG90LFxuICBTbG90dGFibGUsXG4gIC8vXG4gIFJvb3QsXG4gIGNyZWF0ZVNsb3QsXG4gIGNyZWF0ZVNsb3R0YWJsZSxcbn0gZnJvbSAnLi9zbG90JztcbmV4cG9ydCB0eXBlIHsgU2xvdFByb3BzIH0gZnJvbSAnLi9zbG90JztcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGNvbXBvc2VSZWZzIH0gZnJvbSAnQHJhZGl4LXVpL3JlYWN0LWNvbXBvc2UtcmVmcyc7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIFNsb3RcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuaW50ZXJmYWNlIFNsb3RQcm9wcyBleHRlbmRzIFJlYWN0LkhUTUxBdHRyaWJ1dGVzPEhUTUxFbGVtZW50PiB7XG4gIGNoaWxkcmVuPzogUmVhY3QuUmVhY3ROb2RlO1xufVxuXG4vKiBAX19OT19TSURFX0VGRkVDVFNfXyAqLyBleHBvcnQgZnVuY3Rpb24gY3JlYXRlU2xvdChvd25lck5hbWU6IHN0cmluZykge1xuICBjb25zdCBTbG90Q2xvbmUgPSBjcmVhdGVTbG90Q2xvbmUob3duZXJOYW1lKTtcbiAgY29uc3QgU2xvdCA9IFJlYWN0LmZvcndhcmRSZWY8SFRNTEVsZW1lbnQsIFNsb3RQcm9wcz4oKHByb3BzLCBmb3J3YXJkZWRSZWYpID0+IHtcbiAgICBjb25zdCB7IGNoaWxkcmVuLCAuLi5zbG90UHJvcHMgfSA9IHByb3BzO1xuICAgIGNvbnN0IGNoaWxkcmVuQXJyYXkgPSBSZWFjdC5DaGlsZHJlbi50b0FycmF5KGNoaWxkcmVuKTtcbiAgICBjb25zdCBzbG90dGFibGUgPSBjaGlsZHJlbkFycmF5LmZpbmQoaXNTbG90dGFibGUpO1xuXG4gICAgaWYgKHNsb3R0YWJsZSkge1xuICAgICAgLy8gdGhlIG5ldyBlbGVtZW50IHRvIHJlbmRlciBpcyB0aGUgb25lIHBhc3NlZCBhcyBhIGNoaWxkIG9mIGBTbG90dGFibGVgXG4gICAgICBjb25zdCBuZXdFbGVtZW50ID0gc2xvdHRhYmxlLnByb3BzLmNoaWxkcmVuO1xuXG4gICAgICBjb25zdCBuZXdDaGlsZHJlbiA9IGNoaWxkcmVuQXJyYXkubWFwKChjaGlsZCkgPT4ge1xuICAgICAgICBpZiAoY2hpbGQgPT09IHNsb3R0YWJsZSkge1xuICAgICAgICAgIC8vIGJlY2F1c2UgdGhlIG5ldyBlbGVtZW50IHdpbGwgYmUgdGhlIG9uZSByZW5kZXJlZCwgd2UgYXJlIG9ubHkgaW50ZXJlc3RlZFxuICAgICAgICAgIC8vIGluIGdyYWJiaW5nIGl0cyBjaGlsZHJlbiAoYG5ld0VsZW1lbnQucHJvcHMuY2hpbGRyZW5gKVxuICAgICAgICAgIGlmIChSZWFjdC5DaGlsZHJlbi5jb3VudChuZXdFbGVtZW50KSA+IDEpIHJldHVybiBSZWFjdC5DaGlsZHJlbi5vbmx5KG51bGwpO1xuICAgICAgICAgIHJldHVybiBSZWFjdC5pc1ZhbGlkRWxlbWVudChuZXdFbGVtZW50KVxuICAgICAgICAgICAgPyAobmV3RWxlbWVudC5wcm9wcyBhcyB7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfSkuY2hpbGRyZW5cbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8U2xvdENsb25lIHsuLi5zbG90UHJvcHN9IHJlZj17Zm9yd2FyZGVkUmVmfT5cbiAgICAgICAgICB7UmVhY3QuaXNWYWxpZEVsZW1lbnQobmV3RWxlbWVudClcbiAgICAgICAgICAgID8gUmVhY3QuY2xvbmVFbGVtZW50KG5ld0VsZW1lbnQsIHVuZGVmaW5lZCwgbmV3Q2hpbGRyZW4pXG4gICAgICAgICAgICA6IG51bGx9XG4gICAgICAgIDwvU2xvdENsb25lPlxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFNsb3RDbG9uZSB7Li4uc2xvdFByb3BzfSByZWY9e2ZvcndhcmRlZFJlZn0+XG4gICAgICAgIHtjaGlsZHJlbn1cbiAgICAgIDwvU2xvdENsb25lPlxuICAgICk7XG4gIH0pO1xuXG4gIFNsb3QuZGlzcGxheU5hbWUgPSBgJHtvd25lck5hbWV9LlNsb3RgO1xuICByZXR1cm4gU2xvdDtcbn1cblxuY29uc3QgU2xvdCA9IGNyZWF0ZVNsb3QoJ1Nsb3QnKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogU2xvdENsb25lXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmludGVyZmFjZSBTbG90Q2xvbmVQcm9wcyB7XG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG59XG5cbi8qIEBfX05PX1NJREVfRUZGRUNUU19fICovIGZ1bmN0aW9uIGNyZWF0ZVNsb3RDbG9uZShvd25lck5hbWU6IHN0cmluZykge1xuICBjb25zdCBTbG90Q2xvbmUgPSBSZWFjdC5mb3J3YXJkUmVmPGFueSwgU2xvdENsb25lUHJvcHM+KChwcm9wcywgZm9yd2FyZGVkUmVmKSA9PiB7XG4gICAgY29uc3QgeyBjaGlsZHJlbiwgLi4uc2xvdFByb3BzIH0gPSBwcm9wcztcblxuICAgIGlmIChSZWFjdC5pc1ZhbGlkRWxlbWVudChjaGlsZHJlbikpIHtcbiAgICAgIGNvbnN0IGNoaWxkcmVuUmVmID0gZ2V0RWxlbWVudFJlZihjaGlsZHJlbik7XG4gICAgICBjb25zdCBwcm9wcyA9IG1lcmdlUHJvcHMoc2xvdFByb3BzLCBjaGlsZHJlbi5wcm9wcyBhcyBBbnlQcm9wcyk7XG4gICAgICAvLyBkbyBub3QgcGFzcyByZWYgdG8gUmVhY3QuRnJhZ21lbnQgZm9yIFJlYWN0IDE5IGNvbXBhdGliaWxpdHlcbiAgICAgIGlmIChjaGlsZHJlbi50eXBlICE9PSBSZWFjdC5GcmFnbWVudCkge1xuICAgICAgICBwcm9wcy5yZWYgPSBmb3J3YXJkZWRSZWYgPyBjb21wb3NlUmVmcyhmb3J3YXJkZWRSZWYsIGNoaWxkcmVuUmVmKSA6IGNoaWxkcmVuUmVmO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFJlYWN0LmNsb25lRWxlbWVudChjaGlsZHJlbiwgcHJvcHMpO1xuICAgIH1cblxuICAgIHJldHVybiBSZWFjdC5DaGlsZHJlbi5jb3VudChjaGlsZHJlbikgPiAxID8gUmVhY3QuQ2hpbGRyZW4ub25seShudWxsKSA6IG51bGw7XG4gIH0pO1xuXG4gIFNsb3RDbG9uZS5kaXNwbGF5TmFtZSA9IGAke293bmVyTmFtZX0uU2xvdENsb25lYDtcbiAgcmV0dXJuIFNsb3RDbG9uZTtcbn1cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogU2xvdHRhYmxlXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmNvbnN0IFNMT1RUQUJMRV9JREVOVElGSUVSID0gU3ltYm9sKCdyYWRpeC5zbG90dGFibGUnKTtcblxuaW50ZXJmYWNlIFNsb3R0YWJsZVByb3BzIHtcbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTtcbn1cblxuaW50ZXJmYWNlIFNsb3R0YWJsZUNvbXBvbmVudCBleHRlbmRzIFJlYWN0LkZDPFNsb3R0YWJsZVByb3BzPiB7XG4gIF9fcmFkaXhJZDogc3ltYm9sO1xufVxuXG4vKiBAX19OT19TSURFX0VGRkVDVFNfXyAqLyBleHBvcnQgZnVuY3Rpb24gY3JlYXRlU2xvdHRhYmxlKG93bmVyTmFtZTogc3RyaW5nKSB7XG4gIGNvbnN0IFNsb3R0YWJsZTogU2xvdHRhYmxlQ29tcG9uZW50ID0gKHsgY2hpbGRyZW4gfSkgPT4ge1xuICAgIHJldHVybiA8PntjaGlsZHJlbn08Lz47XG4gIH07XG4gIFNsb3R0YWJsZS5kaXNwbGF5TmFtZSA9IGAke293bmVyTmFtZX0uU2xvdHRhYmxlYDtcbiAgU2xvdHRhYmxlLl9fcmFkaXhJZCA9IFNMT1RUQUJMRV9JREVOVElGSUVSO1xuICByZXR1cm4gU2xvdHRhYmxlO1xufVxuXG5jb25zdCBTbG90dGFibGUgPSBjcmVhdGVTbG90dGFibGUoJ1Nsb3R0YWJsZScpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbnR5cGUgQW55UHJvcHMgPSBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuXG5mdW5jdGlvbiBpc1Nsb3R0YWJsZShcbiAgY2hpbGQ6IFJlYWN0LlJlYWN0Tm9kZVxuKTogY2hpbGQgaXMgUmVhY3QuUmVhY3RFbGVtZW50PFNsb3R0YWJsZVByb3BzLCB0eXBlb2YgU2xvdHRhYmxlPiB7XG4gIHJldHVybiAoXG4gICAgUmVhY3QuaXNWYWxpZEVsZW1lbnQoY2hpbGQpICYmXG4gICAgdHlwZW9mIGNoaWxkLnR5cGUgPT09ICdmdW5jdGlvbicgJiZcbiAgICAnX19yYWRpeElkJyBpbiBjaGlsZC50eXBlICYmXG4gICAgY2hpbGQudHlwZS5fX3JhZGl4SWQgPT09IFNMT1RUQUJMRV9JREVOVElGSUVSXG4gICk7XG59XG5cbmZ1bmN0aW9uIG1lcmdlUHJvcHMoc2xvdFByb3BzOiBBbnlQcm9wcywgY2hpbGRQcm9wczogQW55UHJvcHMpIHtcbiAgLy8gYWxsIGNoaWxkIHByb3BzIHNob3VsZCBvdmVycmlkZVxuICBjb25zdCBvdmVycmlkZVByb3BzID0geyAuLi5jaGlsZFByb3BzIH07XG5cbiAgZm9yIChjb25zdCBwcm9wTmFtZSBpbiBjaGlsZFByb3BzKSB7XG4gICAgY29uc3Qgc2xvdFByb3BWYWx1ZSA9IHNsb3RQcm9wc1twcm9wTmFtZV07XG4gICAgY29uc3QgY2hpbGRQcm9wVmFsdWUgPSBjaGlsZFByb3BzW3Byb3BOYW1lXTtcblxuICAgIGNvbnN0IGlzSGFuZGxlciA9IC9eb25bQS1aXS8udGVzdChwcm9wTmFtZSk7XG4gICAgaWYgKGlzSGFuZGxlcikge1xuICAgICAgLy8gaWYgdGhlIGhhbmRsZXIgZXhpc3RzIG9uIGJvdGgsIHdlIGNvbXBvc2UgdGhlbVxuICAgICAgaWYgKHNsb3RQcm9wVmFsdWUgJiYgY2hpbGRQcm9wVmFsdWUpIHtcbiAgICAgICAgb3ZlcnJpZGVQcm9wc1twcm9wTmFtZV0gPSAoLi4uYXJnczogdW5rbm93bltdKSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gY2hpbGRQcm9wVmFsdWUoLi4uYXJncyk7XG4gICAgICAgICAgc2xvdFByb3BWYWx1ZSguLi5hcmdzKTtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgLy8gYnV0IGlmIGl0IGV4aXN0cyBvbmx5IG9uIHRoZSBzbG90LCB3ZSB1c2Ugb25seSB0aGlzIG9uZVxuICAgICAgZWxzZSBpZiAoc2xvdFByb3BWYWx1ZSkge1xuICAgICAgICBvdmVycmlkZVByb3BzW3Byb3BOYW1lXSA9IHNsb3RQcm9wVmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGlmIGl0J3MgYHN0eWxlYCwgd2UgbWVyZ2UgdGhlbVxuICAgIGVsc2UgaWYgKHByb3BOYW1lID09PSAnc3R5bGUnKSB7XG4gICAgICBvdmVycmlkZVByb3BzW3Byb3BOYW1lXSA9IHsgLi4uc2xvdFByb3BWYWx1ZSwgLi4uY2hpbGRQcm9wVmFsdWUgfTtcbiAgICB9IGVsc2UgaWYgKHByb3BOYW1lID09PSAnY2xhc3NOYW1lJykge1xuICAgICAgb3ZlcnJpZGVQcm9wc1twcm9wTmFtZV0gPSBbc2xvdFByb3BWYWx1ZSwgY2hpbGRQcm9wVmFsdWVdLmZpbHRlcihCb29sZWFuKS5qb2luKCcgJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHsgLi4uc2xvdFByb3BzLCAuLi5vdmVycmlkZVByb3BzIH07XG59XG5cbi8vIEJlZm9yZSBSZWFjdCAxOSBhY2Nlc3NpbmcgYGVsZW1lbnQucHJvcHMucmVmYCB3aWxsIHRocm93IGEgd2FybmluZyBhbmQgc3VnZ2VzdCB1c2luZyBgZWxlbWVudC5yZWZgXG4vLyBBZnRlciBSZWFjdCAxOSBhY2Nlc3NpbmcgYGVsZW1lbnQucmVmYCBkb2VzIHRoZSBvcHBvc2l0ZS5cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9wdWxsLzI4MzQ4XG4vL1xuLy8gQWNjZXNzIHRoZSByZWYgdXNpbmcgdGhlIG1ldGhvZCB0aGF0IGRvZXNuJ3QgeWllbGQgYSB3YXJuaW5nLlxuZnVuY3Rpb24gZ2V0RWxlbWVudFJlZihlbGVtZW50OiBSZWFjdC5SZWFjdEVsZW1lbnQpIHtcbiAgLy8gUmVhY3QgPD0xOCBpbiBERVZcbiAgbGV0IGdldHRlciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZWxlbWVudC5wcm9wcywgJ3JlZicpPy5nZXQ7XG4gIGxldCBtYXlXYXJuID0gZ2V0dGVyICYmICdpc1JlYWN0V2FybmluZycgaW4gZ2V0dGVyICYmIGdldHRlci5pc1JlYWN0V2FybmluZztcbiAgaWYgKG1heVdhcm4pIHtcbiAgICByZXR1cm4gKGVsZW1lbnQgYXMgYW55KS5yZWY7XG4gIH1cblxuICAvLyBSZWFjdCAxOSBpbiBERVZcbiAgZ2V0dGVyID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlbGVtZW50LCAncmVmJyk/LmdldDtcbiAgbWF5V2FybiA9IGdldHRlciAmJiAnaXNSZWFjdFdhcm5pbmcnIGluIGdldHRlciAmJiBnZXR0ZXIuaXNSZWFjdFdhcm5pbmc7XG4gIGlmIChtYXlXYXJuKSB7XG4gICAgcmV0dXJuIChlbGVtZW50LnByb3BzIGFzIHsgcmVmPzogUmVhY3QuUmVmPHVua25vd24+IH0pLnJlZjtcbiAgfVxuXG4gIC8vIE5vdCBERVZcbiAgcmV0dXJuIChlbGVtZW50LnByb3BzIGFzIHsgcmVmPzogUmVhY3QuUmVmPHVua25vd24+IH0pLnJlZiB8fCAoZWxlbWVudCBhcyBhbnkpLnJlZjtcbn1cblxuZXhwb3J0IHtcbiAgU2xvdCxcbiAgU2xvdHRhYmxlLFxuICAvL1xuICBTbG90IGFzIFJvb3QsXG59O1xuZXhwb3J0IHR5cGUgeyBTbG90UHJvcHMgfTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUFBLGFBQUE7QUFBQUMsUUFBQSxDQUFBRCxhQUFBO0VBQUFFLElBQUEsRUFBQUEsQ0FBQSxLQUFBQyxJQUFBO0VBQUFBLElBQUEsRUFBQUEsQ0FBQSxLQUFBQSxJQUFBO0VBQUFDLFNBQUEsRUFBQUEsQ0FBQSxLQUFBQSxTQUFBO0VBQUFDLFVBQUEsRUFBQUEsQ0FBQSxLQUFBQSxVQUFBO0VBQUFDLGVBQUEsRUFBQUEsQ0FBQSxLQUFBQTtBQUFBO0FBQUFDLE1BQUEsQ0FBQUMsT0FBQSxHQUFBQyxZQUFBLENBQUFULGFBQUE7OztBQ0FBLElBQUFVLEtBQUEsR0FBdUJDLE9BQUEsQ0FBQUMsT0FBQTtBQUN2QixJQUFBQyx5QkFBQSxHQUE0QkQsT0FBQTtBQW1DcEIsSUFBQUUsa0JBQUEsR0FBQUYsT0FBQTtBQUFBO0FBekIwQixTQUFTUCxXQUFXVSxTQUFBLEVBQW1CO0VBQ3ZFLE1BQU1DLFNBQUEsR0FBWSxlQUFBQyxlQUFBLENBQWdCRixTQUFTO0VBQzNDLE1BQU1HLEtBQUEsR0FBYVIs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