{"version":3,"names":["react_1","cov_vj6qkjps7","s","require","useRetryMechanism","maxRetries","b","baseDelay","f","retryCount","setRetryCount","useState","isRetrying","setIsRetrying","retryWithBackoff","useCallback","fn","attempt","error","delay","Math","pow","Promise","resolve","setTimeout","console","resetRetry","canRetry","exports"],"sources":["/workspaces/MyFitHero/src/features/auth/hooks/useRetryMechanism.ts"],"sourcesContent":["import { useState, useCallback } from 'react';\n\ninterface UseRetryOptions {\n  maxRetries?: number;\n  baseDelay?: number;\n}\n\nexport const useRetryMechanism = ({ maxRetries = 3, baseDelay = 1000 }: UseRetryOptions = {}) => {\n  const [retryCount, setRetryCount] = useState(0);\n  const [isRetrying, setIsRetrying] = useState(false);\n\n  const retryWithBackoff = useCallback(async (fn: () => Promise<void>, attempt: number = 0): Promise<void> => {\n    try {\n      await fn();\n      setRetryCount(0); // Reset retry count on success\n    } catch (error: any) {\n      if (attempt < maxRetries) {\n        const delay = Math.pow(2, attempt) * baseDelay; // Exponential backoff\n        \n        setIsRetrying(true);\n        setRetryCount(attempt + 1);\n        \n        await new Promise(resolve => setTimeout(resolve, delay));\n        return retryWithBackoff(fn, attempt + 1);\n      } else {\n        console.error('ðŸ”´ Toutes les tentatives Ã©chouÃ©es');\n        throw error;\n      }\n    } finally {\n      setIsRetrying(false);\n    }\n  }, [maxRetries, baseDelay]);\n\n  const resetRetry = useCallback(() => {\n    setRetryCount(0);\n    setIsRetrying(false);\n  }, []);\n\n  const canRetry = retryCount < maxRetries;\n\n  return {\n    retryCount,\n    isRetrying,\n    maxRetries,\n    retryWithBackoff,\n    resetRetry,\n    canRetry\n  };\n};"],"mappings":"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","ignoreList":[]}