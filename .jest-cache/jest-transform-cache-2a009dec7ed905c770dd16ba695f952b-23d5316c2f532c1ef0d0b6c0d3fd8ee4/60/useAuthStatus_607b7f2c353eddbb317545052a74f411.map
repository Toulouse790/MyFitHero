{"version":3,"names":["react_1","cov_yaftkmsdp","s","require","supabase_1","useAuthStatus","f","user","setUser","useState","session","setSession","loading","setLoading","useEffect","checkUser","data","error","supabase","auth","getSession","b","console","subscription","onAuthStateChange","event","unsubscribe","signOut","isAuthenticated","exports"],"sources":["/workspaces/MyFitHero/src/features/auth/hooks/useAuthStatus.ts"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { supabase } from '@/lib/supabase';\n\nexport interface AuthStatus {\n  isAuthenticated: boolean;\n  user: any | undefined;\n  session: any | undefined;\n  loading: boolean;\n  signOut: () => Promise<void>;\n}\n\nexport const useAuthStatus = (): AuthStatus => {\n  const [user, setUser] = useState<any | null>(null);\n  const [session, setSession] = useState<any | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    // Vérifier la session actuelle\n    const checkUser = async () => {\n      try {\n        const {\n          data: { session },\n          error,\n        } = await supabase.auth.getSession();\n        if (error) throw error;\n\n        setSession(session);\n        setUser(session?.user || null);\n      } catch (error: any) {\n      // Erreur silencieuse\n        console.error('Error checking user:', error);\n        setSession(null);\n        setUser(null);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    checkUser();\n\n    // Écouter les changements d'authentification\n    const {\n      data: { subscription },\n    } = supabase.auth.onAuthStateChange(async (event, session) => {\n      setSession(session);\n      setUser(session?.user ?? null);\n      setLoading(false);\n    });\n\n    return () => subscription.unsubscribe();\n  }, []);\n\n  const signOut = async () => {\n    try {\n      const { error } = await supabase.auth.signOut();\n      if (error) throw error;\n      setSession(null);\n      setUser(null);\n    } catch (error: any) {\n      // Erreur silencieuse\n      console.error('Error signing out:', error);\n    }\n  };\n\n  return {\n    isAuthenticated: !!user,\n    user,\n    session,\n    loading,\n    signOut,\n  };\n};\n"],"mappings":"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","ignoreList":[]}