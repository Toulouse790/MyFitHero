{"version":3,"names":["exports","default","AuthGuard","react_1","cov_2gwthv0ux5","s","__importStar","require","wouter_1","useAuth_1","children","requireOnboarding","b","f","user","isLoading","useAuth","setLocation","useLocation","useEffect","onboarding_completed","currentPath","window","location","pathname","jsx_runtime_1","jsx","className","jsxs","Fragment"],"sources":["/workspaces/MyFitHero/src/features/auth/components/AuthGuard.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useLocation } from 'wouter';\nimport { useAuth } from '@/features/auth/hooks/useAuth';\n\ninterface AuthGuardProps {\n  children: React.ReactNode;\n  requireOnboarding?: boolean;\n}\n\nexport default function AuthGuard({ children, requireOnboarding = false }: AuthGuardProps) {\n  const { user, isLoading } = useAuth();\n  const [, setLocation] = useLocation();\n\n  useEffect(() => {\n    if (!isLoading) {\n      if (!user) {\n        // Pas d'utilisateur connecté, rediriger vers auth\n        setLocation('/auth');\n      } else if (requireOnboarding && !user.onboarding_completed) {\n        // Utilisateur connecté mais onboarding requis et pas complété\n        setLocation('/onboarding');\n      } else if (!requireOnboarding && !user.onboarding_completed) {\n        // Si on accède à une page protégée mais onboarding pas complété\n        // (sauf si c'est la page d'onboarding elle-même)\n        const currentPath = window.location.pathname;\n        if (currentPath !== '/onboarding' && currentPath !== '/auth') {\n          setLocation('/onboarding');\n        }\n      }\n    }\n  }, [user, isLoading, requireOnboarding, setLocation]);\n\n  // Affichage de chargement pendant la vérification auth\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Vérification de l'authentification...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Si pas d'utilisateur, ne pas afficher le contenu\n  // (la redirection se fera via useEffect)\n  if (!user) {\n    return null;\n  }\n\n  // Si onboarding requis mais pas complété\n  if (requireOnboarding && !user.onboarding_completed) {\n    return null;\n  }\n\n  // Si utilisateur pas complètement configuré et pas sur la bonne page\n  if (!user.onboarding_completed) {\n    const currentPath = window.location.pathname;\n    if (currentPath !== '/onboarding' && currentPath !== '/auth') {\n      return null;\n    }\n  }\n\n  // Tout va bien, afficher le contenu\n  return <>{children}</>;\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}