{"version":3,"names":["cov_1unwjiex74","actualCoverage","react_1","s","__importDefault","require","wouter_1","auth_store_1","AuthGuard","children","redirectTo","b","requireProfile","f","isAuthenticated","isLoading","user","useAuthStore","location","useLocation","jsx_runtime_1","jsx","className","Redirect","to","profileComplete","sport","weight","height","age","Fragment","exports","PublicGuard"],"sources":["/workspaces/MyFitHero/src/core/auth/auth.guard.tsx"],"sourcesContent":["import React from 'react';\nimport { useLocation, Redirect } from 'wouter';\nimport { useAuthStore } from './auth.store';\n\ninterface AuthGuardProps {\n  children: React.ReactNode;\n  redirectTo?: string;\n  requireProfile?: boolean;\n}\n\nexport const AuthGuard: React.FC<AuthGuardProps> = ({\n  children,\n  redirectTo = '/auth',\n  requireProfile = false,\n}) => {\n  const { isAuthenticated, isLoading, user } = useAuthStore();\n  const [location] = useLocation();\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return <Redirect to={redirectTo} />;\n  }\n\n  // Vérifier si le profil est complet si nécessaire\n  if (requireProfile && user) {\n    const profileComplete = user.sport && user.weight && user.height && user.age;\n    if (!profileComplete) {\n      return <Redirect to=\"/onboarding\" />;\n    }\n  }\n\n  return <>{children}</>;\n};\n\n// Guard pour les routes publiques\nexport const PublicGuard: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const { isAuthenticated, isLoading } = useAuthStore();\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  if (isAuthenticated) {\n    return <Redirect to=\"/dashboard\" />;\n  }\n\n  return <>{children}</>;\n};\n"],"mappings":"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","ignoreList":[]}