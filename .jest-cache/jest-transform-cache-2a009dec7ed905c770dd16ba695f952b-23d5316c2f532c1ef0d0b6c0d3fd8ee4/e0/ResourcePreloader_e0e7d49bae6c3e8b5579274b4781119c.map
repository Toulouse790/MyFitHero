{"version":3,"names":["cov_19w7wk212o","actualCoverage","react_1","s","__importDefault","require","react_2","performanceOptimizations_1","ResourcePreloader","critical","b","prefetch","preload","f","useEffect","optimizer","RuntimeOptimizer","getInstance","forEach","resource","preloadResource","length","scheduleIdleTask","prefetchResource","setTimeout","exports","useResourceHints","dnsPrefetchDomains","domain","link","document","createElement","rel","href","head","appendChild","preconnectDomains","crossOrigin","likelyRoutes","route","preloadCriticalImages","imageUrls","url","prefetchNextPage","pageUrl","CRITICAL_RESOURCES","landing","dashboard","workout","nutrition","OptimizedPageWrapper","children","pageType","className","criticalResources","jsx_runtime_1","jsxs","Fragment","jsx","style","minHeight","default"],"sources":["/workspaces/MyFitHero/src/core/utils/ResourcePreloader.tsx"],"sourcesContent":["import React from 'react';\nimport { useEffect } from 'react';\nimport { RuntimeOptimizer } from './performanceOptimizations';\n\ninterface ResourcePreloaderProps {\n  critical?: string[];\n  prefetch?: string[];\n  preload?: string[];\n}\n\n// Composant pour précharger les ressources critiques\nexport const ResourcePreloader: React.FC<ResourcePreloaderProps> = ({\n  critical = [],\n  prefetch = [],\n  preload = []\n}) => {\n  useEffect(() => {\n    const optimizer = RuntimeOptimizer.getInstance();\n\n    // Précharger les ressources critiques immédiatement\n    critical.forEach(resource => {\n      optimizer.preloadResource(resource);\n    });\n\n    // Prefetch des ressources après le chargement initial\n    if (prefetch.length > 0) {\n      optimizer.scheduleIdleTask(() => {\n        prefetch.forEach(resource => {\n          optimizer.prefetchResource(resource);\n        });\n      });\n    }\n\n    // Preload des ressources importantes\n    if (preload.length > 0) {\n      setTimeout(() => {\n        preload.forEach(resource => {\n          optimizer.preloadResource(resource);\n        });\n      }, 100);\n    }\n  }, [critical, prefetch, preload]);\n\n  return null; // Composant invisible\n};\n\n// Hook pour gérer les resource hints\nexport const useResourceHints = () => {\n  useEffect(() => {\n    const optimizer = RuntimeOptimizer.getInstance();\n\n    // DNS prefetch pour les domaines externes\n    const dnsPrefetchDomains = [\n      'https://fonts.googleapis.com',\n      'https://fonts.gstatic.com',\n      'https://api.supabase.io',\n      'https://cdn.jsdelivr.net'\n    ];\n\n    dnsPrefetchDomains.forEach(domain => {\n      const link = document.createElement('link');\n      link.rel = 'dns-prefetch';\n      link.href = domain;\n      document.head.appendChild(link);\n    });\n\n    // Preconnect pour les ressources critiques\n    const preconnectDomains = [\n      'https://fonts.googleapis.com',\n      'https://api.supabase.io'\n    ];\n\n    preconnectDomains.forEach(domain => {\n      const link = document.createElement('link');\n      link.rel = 'preconnect';\n      link.href = domain;\n      link.crossOrigin = 'anonymous';\n      document.head.appendChild(link);\n    });\n\n    // Prefetch des routes probables après chargement\n    optimizer.scheduleIdleTask(() => {\n      const likelyRoutes = ['/dashboard', '/workouts', '/nutrition'];\n      likelyRoutes.forEach(route => {\n        optimizer.prefetchResource(route, 'document');\n      });\n    });\n\n  }, []);\n\n  return {\n    preloadCriticalImages: (imageUrls: string[]) => {\n      const optimizer = RuntimeOptimizer.getInstance();\n      imageUrls.forEach(url => optimizer.preloadResource(url, 'image'));\n    },\n    \n    prefetchNextPage: (pageUrl: string) => {\n      const optimizer = RuntimeOptimizer.getInstance();\n      optimizer.prefetchResource(pageUrl, 'document');\n    }\n  };\n};\n\n// Configuration des ressources critiques par page\nexport const CRITICAL_RESOURCES = {\n  landing: [\n    '/assets/hero-image.webp',\n    '/assets/logo.svg'\n  ],\n  dashboard: [\n    '/assets/dashboard-icons.svg',\n    '/api/user/stats'\n  ],\n  workout: [\n    '/assets/exercise-thumbnails.webp',\n    '/api/workouts/templates'\n  ],\n  nutrition: [\n    '/assets/food-icons.svg',\n    '/api/nutrition/recent'\n  ]\n};\n\n// Component wrapper pour optimiser automatiquement les pages\nexport const OptimizedPageWrapper: React.FC<{\n  children: React.ReactNode;\n  pageType: keyof typeof CRITICAL_RESOURCES;\n  className?: string;\n}> = ({ children, pageType, className }) => {\n  const criticalResources = CRITICAL_RESOURCES[pageType] || [];\n  \n  return (\n    <>\n      <ResourcePreloader critical={criticalResources} />\n      <div className={className} style={{ minHeight: '100vh' }}>\n        {children}\n      </div>\n    </>\n  );\n};\n\nexport default ResourcePreloader;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}